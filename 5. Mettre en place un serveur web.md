---
marp: true
theme: uncover
class:
 - invert
---


LIGNE DE COMMANDE: Apprendre les bases 5/6 - Mettre en place un serveur web (LAMP)
===

---

## C'est quoi LAMP?

**LAMP**: **L**inux **A**pache **M**ySQL/**M**ariaDB **P**HP

--

- Sur Windows: *WAMP*
- Sur Mac: *MAMP*
- Cross-Platform: *XAMPP*

---

## Présentation des services

### Apache

**Le serveur HTTP**

*Objectif:* communiquer avec le navigateur en utilisant le protocole HTTP(S)

```sh
# Requête HTTP
GET / HTTP/1.1
Host: www.perdu.com
```

---

### MySQL/MariaDB

**Serveur de base de données**

*Objectif:* stocker, manipuler et accéder à des listes de données organisées en tableaux


**MariaDB**: Fork plus ouvert, plus performant et 100% compatible MySQL

---

### PHP

**Le langage de script dynamique**

*Objectif*: générer du contenu web dynamiquement, en insérant des logiques d'algorithmique

*Alternatives*: Python, Ruby, Java, C#, etc...

---

## Installation

### 1: PHP

```bash
# Supprimer clark du groupe geeks
sudo apt install php

# Tester si installation fonctionnelle (7.4)
php -v
```

Paquets installés automatiquement:
 `php-cli`, `php-common`, `php-readline`, etc...

---

#### Serveur web interne à PHP

Doc officielle de PHP à ce sujet [ici](https://www.php.net/manual/fr/features.commandline.webserver.php)

- A ne pas utiliser en production
- Mais intéressant en phase de développement
  - Racine attendue: `index.php`
  - Affiche logs des requêtes

```sh
# Dans dossier contenant du PHP
php -S localhost:8080
```

---

### 2. Apache

**Serveur web utilisable en production**


```sh
# Installer apache2
sudo apt install apache2

# Tester si apache2 est bien installé
apache2 -version
```

---

#### L'utilisateur www-data

**Sert d'exécuteur pour Apache sur l'OS Debian et ses dérivés**

`/var/www/html`: Dossier par défaut qui est chargé
Son  propriétaire devrait être l'utilisateur qui va maintenir le contenu localement, mais le groupe propriétaire devrait rester www-data

```sh
sudo chown -R $USER:www-data /var/www/example
```

---


#### Système d'initialisation

**système d’initialisation**: initialiser les composants qui doivent être démarrés une fois que le noyau Linux est lancé


`systemd`: gestionnaire du système d’initialisation
`systemctl`: outil pour contrôler le système d'initialisation (gérer les services, vérifier état, etc...)

---

`systemctl` exploite une unité de service.
Donc apache2 est l'abréviation d'`apache2.service`

```bash
# Statut du service
sudo systemctl status apache2

# Démarrer le service
sudo systemctl start apache2
# Stopper le service
sudo systemctl stop apache2
# Relancer le service
sudo systemctl restart apache2

# Activer le service
sudo systemctl enable apache2
# Désactiver le service
sudo systemctl disable apache2
```

---



### 3: MySQL/MariaDB

`mariadb-server`: Serveur de base de données
`mariadb-client`: Outil CLI pour se connecter au serveur de BDD

```sh
# Installer mariadb côté serveur et client
sudo apt install mariadb-server mariadb-client

# Se connecter à mariadb
sudo myql -u root -p
```
